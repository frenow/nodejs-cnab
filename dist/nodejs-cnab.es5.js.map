{"version":3,"file":"nodejs-cnab.es5.js","sources":["../src/const.ts","../src/utils.ts","../src/remessa.ts","../src/retorno.ts","../src/helperGenerateRemessaCNAB240.ts","../src/helperGenerateRemessaCNAB400.ts"],"sourcesContent":["export const CNAB_YAML_DIR = './node_modules/@banco-br/cnab_yaml'\nexport const BANK = {\n  bb: {\n    code: '001',\n    remessa: {\n      400: ['header_arquivo', 'detalhe']\n    },\n    retorno: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\n    }\n  },\n  santander: {\n    code: '033',\n    remessa: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo'],\n      240: [\n        'header_arquivo',\n        'header_lote',\n        'detalhe_segmento_p',\n        'detalhe_segmento_q',\n        'detalhe_segmento_r',\n        'trailer_lote',\n        'trailer_arquivo'\n      ]\n    },\n    retorno: {\n      400: ['header_arquivo', 'detalhe'],\n      240: {\n        headers: { name: ['header_arquivo', 'header_lote'], quantity: 2 },\n        details: { name: ['detalhe_segmento_t', 'detalhe_segmento_u'] },\n        trailers: { name: ['trailer_lote', 'trailer_arquivo'], quantity: 2 }\n      }\n    }\n  },\n  banrisul: {\n    code: '041',\n    retorno: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\n    }\n  },\n  caixa: {\n    code: '104',\n    remessa: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\n    },\n    retorno: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\n    }\n  },\n  bradesco: {\n    code: '237',\n    remessa: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\n    },\n    retorno: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\n    }\n  },\n  itau: {\n    code: '341',\n    retorno: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\n    }\n  },\n  bancoob: {\n    code: '756',\n    remessa: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\n    },\n    retorno: {\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\n    }\n  }\n}\n","import { CNAB_YAML_DIR } from './const'\n\nconst pad = require('pad')\nconst fs = require('fs')\nconst yaml = require('js-yaml')\n\nexport function makeLine(layout: any, data: any) {\n  const object: any = {}\n  if (layout) {\n    let index = 0\n    Object.keys(layout).forEach(key => {\n      const item = layout[key]\n      if (item.pos) {\n        const start = item.pos[0] - 1 // yml começa no 1 e array em 0\n        const length = item.pos[1] - item.pos[0] + 1\n        if (data) {\n          object[key] = data.substr(start, length) || item.default\n        }\n      } else {\n        console.warn('Nao tem posicao pra key', key)\n      }\n    })\n  }\n  return object\n}\n\nexport function readLine(layout: any, data: any) {\n  let line = ''\n  const object: any = {}\n  if (layout) {\n    Object.keys(layout).forEach(key => {\n      const item = layout[key]\n      let value\n      if (key in data && data[key]) {\n        value = data[key]\n      } else {\n        value = item.default\n      }\n      const baseValue = value ? value + '' : ''\n      const pictures = usePicture(item, baseValue)\n      object[key] = pictures\n      line += pictures\n    })\n  }\n  return { line, object }\n}\n\n/**\n *\n *\n */\nconst usePicture = function(item: any, value = '') {\n  const { picture } = item\n  if (picture.indexOf('V9') > 0) {\n    const out = regexPicture(/9\\((\\w+?)\\)/g, picture)\n    return formatCurrency(Number(value), Number(out[0]), Number(out[1]))\n  } else if (picture.startsWith('9')) {\n    const out = regexPicture(/9\\((\\w+?)\\)/g, picture)\n    if (item.date_format) {\n      return formatDate(value, out[0], item.date_format) // , item.date_format\n    } else {\n      return formatNumber(value, out[0])\n    }\n  } else if (picture.startsWith('X')) {\n    const out = regexPicture(/X\\((\\w+?)\\)/g, picture)\n    return formatText(value, out[0])\n  } else {\n    throw new Error(`Cant recognize picture for ${picture}`)\n  }\n}\nconst regexPicture = (exp: any, picture: any) => {\n  let regex = new RegExp(exp)\n  let text = picture // \"9(10)V9(10)\",\n  let result\n  let out = []\n\n  // tslint:disable-next-line:no-conditional-assignment\n  while ((result = regex.exec(text))) {\n    out.push(result[1])\n  }\n\n  return out\n}\n\n/*\n * Alfanumérico (picture X): alinhados à esquerda com brancos à direita. Preferencialmente,\n * todos os caracteres devem ser maiúsculos. Aconselhase a não utilização de\n * caracteres especiais (ex.: “Ç”, “?”,, etc) e\n * acentuação gráfica (ex.: “Á”, “É”, “Ê”, etc) e os campos não utiliza dos deverão ser preenchidos com brancos.\n * */\nconst formatText = function(value: any, size: any) {\n  return pad(value.slice(0, size), size, ' ')\n}\n\n/*  Numérico (picture 9): alinhado à direita com zeros à esquerda e os campos não utilizados deverão ser preenchidos\n * com zeros. - Vírgula assumida (picture V): indica a posição da vírgula dentro de um campo numérico.\n * Exemplo: num campo com picture “9(5)V9(2)”, o número “876,54” será representado por “0087654”\n * @param {*} picture\n * @param {*} value\n */\nconst formatNumber = function(value: any, size: any) {\n  while (value.length < size) {\n    value = '0' + value\n  }\n  return value\n}\n\nconst formatDate = function(value: any, size: any, dateFormat: any) {\n  switch (dateFormat) {\n    case '%d%m%Y':\n      value = value.slice(0, 8)\n      break\n    case '%d%m%y':\n      value = value.slice(0, 4) + value.slice(6, 8)\n      break\n\n    case '%H%M%S':\n      value = value.slice(0, 8)\n      break\n\n    default:\n      throw new Error('dateFormat inválido: ' + dateFormat)\n  }\n\n  while (value.length < size) {\n    value = '0' + value\n  }\n\n  return value\n}\n\nexport function formatCurrency(value: number = 0, integer: number = 0, decimal: number = 0) {\n  value = Number(value)\n  if (typeof value !== 'number') {\n    throw new Error('formatCurrency: ' + value + integer + decimal)\n  }\n\n  //  Efetua o arredondamento\n  const vals = value.toFixed(decimal).split('.')\n  vals[1] = vals[1] || ''\n\n  //  Limita os caracteres\n  vals[0] = pad(Number(integer), vals[0].toString().slice(0, integer), '0')\n  vals[1] = pad(vals[1].toString().slice(0, decimal), Number(decimal), '0')\n\n  return vals.join('')\n}\n\nexport function readYaml(filename: string) {\n  return yaml.safeLoad(fs.readFileSync(filename, 'utf8'))\n}\n\nexport function getDetailsMessage(detailsCodes: string, eventCodes: any) {\n  /*\n    função que retorna as mensagens de rejeição/informação/alerta, referentes a uma cobrança\n  */\n\n  let start = 0\n  let messages: any[] = []\n  let singleDetailCode,\n    detailMessage = ''\n\n  if (detailsCodes && Number(detailsCodes) !== 0) {\n    do {\n      singleDetailCode = detailsCodes.substring(start, 2)\n      detailMessage = eventCodes[singleDetailCode]\n\n      // casos em que não existem dados\n      if (singleDetailCode === '00' || !detailMessage) continue\n\n      messages.push(detailMessage)\n      start += 2\n    } while (singleDetailCode === '')\n  }\n\n  return messages\n}\n\nexport const getLimitSizeDetails = (\n  currentIndex: any = 0,\n  structure: any,\n  segmentName: string = ''\n): number => {\n  let segmentsSize =\n    segmentName !== '' && structure[segmentName] ? structure[segmentName].length : 0\n\n  return currentIndex + segmentsSize\n}\n\nexport const getSegmentData = (params: any) => {\n  let segmentData: any[] = []\n  let {\n    data,\n    segmentValues = [],\n    nodeStartIndex = 0,\n    limitSizeDetails = 0,\n    pathBaseYaml = ''\n  } = params\n\n  let segmentIndex = 0 // controla os segmentos (header_arquivo, header_lote e etc)\n  const dataLimit = data.slice(nodeStartIndex, limitSizeDetails) // pega somente os dados de cada partição (header, details ou trailer)\n\n  dataLimit.forEach((segmentLine: any) => {\n    segmentIndex = segmentValues[segmentIndex] ? segmentIndex : 0 // itera sobre os segmentos\n    const segmentName = segmentValues[segmentIndex] // pega o nome de um dos segmentos (header_arquivo, header_lote e etc)\n    const layout = readYaml(`${pathBaseYaml}/${segmentName}.yml`) // busca os campos (posição, tamanho, valor padrão (default) e etc)\n    segmentData.push({ layout, data: segmentLine }) // adiciona dados convertidos (arquivo => propriedades)\n    segmentIndex++ // próximo segmento\n  })\n\n  return {\n    data: segmentData,\n    nextLine: nodeStartIndex + dataLimit.length\n  }\n}\n","import { readYaml, readLine } from './utils'\r\nimport { CNAB_YAML_DIR } from './const'\r\n\r\n/**\r\n * ARQUIVO REMESSA\r\n * @param {*} files\r\n * @param {*} cnabtype\r\n * @param {*} bankcode\r\n */\r\nexport const generateRemessaCnab = (files: any, cnabtype = 400, bankcode = '237') => {\r\n  try {\r\n    const yamls: any = []\r\n    for (const key in files) {\r\n      const value = files[key]\r\n      if (value.forEach) {\r\n        value.forEach((v: any) => {\r\n          const layout = readYaml(CNAB_YAML_DIR + `/cnab${cnabtype}/${bankcode}/remessa/${key}.yml`)\r\n          yamls.push({\r\n            layout,\r\n            data: v\r\n          })\r\n        })\r\n      } else {\r\n        const layout = readYaml(CNAB_YAML_DIR + `/cnab${cnabtype}/${bankcode}/remessa/${key}.yml`)\r\n        yamls.push({\r\n          layout,\r\n          data: value\r\n        })\r\n      }\r\n    }\r\n\r\n    const infos = yamls.map((i: any, index: any) => {\r\n      return readLine(i.layout, i.data)\r\n    })\r\n\r\n    const infosLine = infos.map((i: any) => {\r\n      return i.line\r\n    })\r\n\r\n    const CNAB_EOL = '\\r\\n'\r\n    const data = infosLine.join(CNAB_EOL)\r\n    return data\r\n  } catch (e) {\r\n    console.error(`generateRemessaCnab`, e)\r\n  }\r\n}\r\n","import { getDetailsMessage, getSegmentData, makeLine, readYaml } from './utils'\nimport { CNAB_YAML_DIR } from './const'\n\n/**\n * ARQUIVO RETORNO\n * @param {*} fileStructure\n * @param {*} cnabtype\n * @param {*} bankcode\n */\nexport const parseRemessaCnab = (\n  fileStructure: any,\n  cnabtype = 400,\n  bankcode = '237',\n  returnFile: { split: (arg0: string) => void }\n) => {\n  try {\n    const yamls = []\n    const pathBaseYaml = `${CNAB_YAML_DIR}/cnab${cnabtype}/${bankcode}/retorno`\n    let nodeStartIndex = 0 // guarda início do próximo segmento\n    let nextNode = ''\n    let limitSizeDetails = 0\n\n    const returnLines: any = returnFile.split('\\n')\n    for (const key in fileStructure) {\n      let segmentInfo = fileStructure[key]\n\n      /* CASO NÃO HAJA MAIS LINHAS (DADOS) */\n      if (!returnLines[nodeStartIndex]) {\n        break\n      }\n\n      /* \n        VERIFICA O LIMITE DE LINHAS ATÉ O PRÓXIMO SEGMENTO \n        (HEADER, DETAILS OU TRAILERS) \n      */\n      switch (key) {\n        case 'headers':\n          limitSizeDetails = segmentInfo.quantity || 0\n          break\n        case 'details':\n          nextNode = 'trailers'\n          limitSizeDetails = returnLines.length - 1 - fileStructure[nextNode].quantity\n          break\n        default:\n          /* TRAILERS */\n\n          limitSizeDetails = returnLines.length - 1\n          break\n      }\n\n      const segmentValues = fileStructure[key].name // segmentos (headers, details ou trailers)\n      if (!segmentValues) {\n        nodeStartIndex += limitSizeDetails\n      } else {\n        let segmentData = getSegmentData({\n          data: returnLines,\n          segmentValues,\n          nodeStartIndex,\n          limitSizeDetails,\n          pathBaseYaml\n        })\n\n        yamls.push(...segmentData.data) // adiciona novo conjunto de dados\n        nodeStartIndex = segmentData.nextLine // próxima linha\n      }\n    }\n\n    const fileData = yamls.map(currentLine => {\n      let line = makeLine(currentLine.layout, currentLine.data)\n      return line\n    })\n\n    return fileData\n  } catch (e) {\n    console.error(`parseRemessaCnab: `, e)\n  }\n}\n\nexport const parseEventMessage = (linesData: any = [], cnabtype = 240, bankcode = '237') => {\n  try {\n    /*\n      40a => 03 => Entrada Rejeitada | 26 => Instrução Rejeitada | 30 => Alteração de Dados Rejeitada\n      40c => 06 => Liquidação        | 09 => Baixa               | 17 => Liquidação após Baixa ou Liquidação de Boleto não Registrado | \n             93 => Baixa Operacional | 94 => Cancelamento de Baixa Operacional\n    */\n    const type40a = ['03', '26', '30']\n    const type40c = ['06', '09', '17', '93', '94']\n\n    if (!linesData || linesData.length === 0) return []\n\n    const eventCodes = readYaml(\n      CNAB_YAML_DIR + `/ocorrencias/cnab${cnabtype}/${bankcode}.ocorrencias.yml`\n    )\n\n    return linesData.map((line: any) => {\n      const message: any = {}\n      let messageDetails: any[] = []\n      let detailCodes,\n        eventCodesTable = ''\n\n      const code = line.codigo_ocorrencia\n      if (code) {\n        // define mensagem principal\n        message.descricao = eventCodes.movimento[code]\n\n        // códigos que descrevem melhor a ocorrência (40a e 40c - Nota 40)\n        detailCodes = line.identificacao_rejeicao\n\n        if (type40a.includes(code)) {\n          // rejeições\n          eventCodesTable = eventCodes.rejeicao\n        } else if (type40c.includes(code)) {\n          // liquidações/baixas\n          if (code === '06')\n            // Liquidação\n            eventCodesTable = eventCodes.liquidacao\n          else eventCodesTable = eventCodes.baixa\n        }\n\n        // retorna as mensagens de rejeição/informação/alerta, baseado na ocorrência\n        messageDetails = getDetailsMessage(detailCodes, eventCodesTable)\n        if (messageDetails.length > 0) {\n          message.details = messageDetails\n        }\n\n        return {\n          ...line,\n          mensagens_ocorrencia: { ...message }\n        }\n      }\n    })\n  } catch (e) {\n    console.error(`parseEventMessage: `, e)\n  }\n}\n","// tslint:disable:variable-name\r\n\r\nimport { generateRemessaCnab } from './remessa'\r\nconst { isCNPJ, isCPF } = require('brazilian-values')\r\nconst dayjs = require('dayjs')\r\n\r\nexport function helperGenerateRemessaCNAB240(dadosGeracao: any, bankCode: any) {\r\n  const Return: any = []\r\n\r\n  /**\r\n   * Header - Arquivo\r\n   */\r\n\r\n  const header_arquivo: any = {\r\n    codigo_inscricao: dadosGeracao.codigo_inscricao,\r\n    numero_inscricao: dadosGeracao.numero_inscricao,\r\n    codigo_convenio: dadosGeracao.codigo_convenio,\r\n    agencia: dadosGeracao.agencia,\r\n    conta_corrente: dadosGeracao.conta_corrente,\r\n    conta_corrente_dv: dadosGeracao.conta_corrente_dv,\r\n    nome_empresa: dadosGeracao.nome_empresa,\r\n    data_geracao: dayjs(dadosGeracao.data_geracao).format('DDMMYYYY'),\r\n    hora_geracao: dayjs(dadosGeracao.data_geracao).format('HHmmss'),\r\n    numero_sequencial_arquivo: dadosGeracao.numero_sequencial_arquivo\r\n  }\r\n  Return.push({ header_arquivo })\r\n\r\n  /**\r\n   * Header - Lote\r\n   */\r\n  const header_lote = {\r\n    codigo_inscricao: dadosGeracao.codigo_inscricao,\r\n    numero_inscricao: dadosGeracao.numero_inscricao,\r\n    codigo_convenio: dadosGeracao.codigo_convenio,\r\n    agencia: dadosGeracao.agencia,\r\n    conta_corrente: dadosGeracao.conta_corrente,\r\n    conta_corrente_dv: dadosGeracao.conta_corrente_dv,\r\n    nome_empresa: dadosGeracao.nome_empresa,\r\n    data_geracao: header_arquivo.data_geracao,\r\n    numero_sequencial_arquivo: dadosGeracao.numero_sequencial_arquivo\r\n  }\r\n  Return.push({ header_lote })\r\n\r\n  /**\r\n   * Detalhe Segmento\r\n   */\r\n  let numero_sequencial_lote = 0\r\n  dadosGeracao.detalhe_segmento.forEach((detalhe_segmento: any) => {\r\n    /**\r\n     * Detalhe Segmento P\r\n     */\r\n    numero_sequencial_lote++\r\n    const detalhe_segmento_p = {\r\n      numero_sequencial_lote,\r\n      agencia: dadosGeracao.agencia,\r\n      conta_corrente: dadosGeracao.conta_corrente,\r\n      conta_corrente_dv: dadosGeracao.conta_corrente_dv,\r\n      nosso_numero: detalhe_segmento.nosso_numero,\r\n      numero_documento: detalhe_segmento.numero_documento,\r\n      vencimento: dayjs(detalhe_segmento.vencimento).format('DDMMYYYY'),\r\n      valor_titulo: detalhe_segmento.valor_titulo,\r\n      data_emissao: dayjs(detalhe_segmento.data_emissao).format('DDMMYYYY'),\r\n      uso_empresa: detalhe_segmento.uso_empresa\r\n    }\r\n    Return.push({ detalhe_segmento_p })\r\n\r\n    /**\r\n     * Detalhe Segmento Q\r\n     */\r\n    numero_sequencial_lote++\r\n    let sacado_codigo_inscricao = 3\r\n    if (isCPF(detalhe_segmento.sacado_numero_inscricao)) sacado_codigo_inscricao = 1\r\n    if (isCNPJ(detalhe_segmento.sacado_numero_inscricao)) sacado_codigo_inscricao = 2\r\n\r\n    const detalhe_segmento_q = {\r\n      numero_sequencial_lote,\r\n      sacado_codigo_inscricao,\r\n      sacado_numero_inscricao: detalhe_segmento.sacado_numero_inscricao,\r\n      nome: detalhe_segmento.nome,\r\n      logradouro: detalhe_segmento.logradouro,\r\n      bairro: detalhe_segmento.bairro,\r\n      cep: detalhe_segmento.cep,\r\n      cidade: detalhe_segmento.cidade,\r\n      estado: detalhe_segmento.estado\r\n    }\r\n    Return.push({ detalhe_segmento_q })\r\n  })\r\n\r\n  /**\r\n   * Trailler - Lote\r\n   */\r\n  const valor_total_titulo_simples = dadosGeracao.detalhe_segmento\r\n    .map((El: any) => El.valor_titulo)\r\n    .reduce((curr: number, total: number) => total + curr, 0)\r\n\r\n  const trailer_lote = {\r\n    qtde_registro_lote: dadosGeracao.detalhe_segmento.length * 2 + 2, // Soma todas as linhas Detalhe P/Q, Header Lote e Header Trailler\r\n    qtde_titulo_cobranca_simples: dadosGeracao.detalhe_segmento.length, //  Soma todos os P\r\n    valor_total_titulo_simples\r\n  }\r\n  Return.push({ trailer_lote })\r\n\r\n  /**\r\n   * Trailler Arquivo\r\n   */\r\n  const trailer_arquivo = {\r\n    qtde_lotes: 1,\r\n    qtde_registros: Return.length + 1\r\n  }\r\n\r\n  Return.push({ trailer_arquivo })\r\n\r\n  return Return.map((Row: any) => generateRemessaCnab(Row, 240, bankCode)).join('\\n')\r\n}\r\n","// tslint:disable:variable-name\r\n\r\nimport { generateRemessaCnab } from './remessa'\r\nconst { isCNPJ, isCPF } = require('brazilian-values')\r\nconst dayjs = require('dayjs')\r\nconst { sumBy } = require('lodash')\r\n\r\nexport function helperGenerateRemessaCNAB400(dadosGeracao: any, bankCode: any) {\r\n  const Return: any = []\r\n  let numero_sequencial = 0\r\n\r\n  /**\r\n   * Header - Arquivo\r\n   */\r\n  numero_sequencial++\r\n  const header_arquivo: any = {\r\n    codigo_convenio: dadosGeracao.codigo_convenio,\r\n    nome_empresa: dadosGeracao.nome_empresa,\r\n    data_geracao: dayjs(dadosGeracao.data_geracao).format('DDMMYYYY'),\r\n    numero_sequencial: Number(numero_sequencial)\r\n  }\r\n\r\n  Return.push({ header_arquivo })\r\n\r\n  /**\r\n   * Detalhe Segmento\r\n   */\r\n  dadosGeracao.detalhe_segmento.forEach((detalhe_segmento: any) => {\r\n    numero_sequencial++\r\n    let sacado_codigo_inscricao = 99\r\n\r\n    if (isCPF(detalhe_segmento.sacado_numero_inscricao)) sacado_codigo_inscricao = 1\r\n    if (isCNPJ(detalhe_segmento.sacado_numero_inscricao)) sacado_codigo_inscricao = 2\r\n\r\n    const detalhe = {\r\n      codigo_inscricao: isCNPJ(dadosGeracao.numero_inscricao) ? 2 : 1,\r\n      numero_inscricao: dadosGeracao.numero_inscricao,\r\n      codigo_convenio: dadosGeracao.codigo_convenio,\r\n      uso_empresa: detalhe_segmento.uso_empresa,\r\n      mensagem: detalhe_segmento.mensagem,\r\n      numero_documento: detalhe_segmento.numero_documento,\r\n      vencimento: dayjs(detalhe_segmento.vencimento).format('DDMMYYYY'),\r\n      valor_titulo: detalhe_segmento.valor_titulo,\r\n      data_emissao: dayjs(detalhe_segmento.data_emissao).format('DDMMYYYY'),\r\n      sacado_codigo_inscricao,\r\n      sacado_numero_inscricao: detalhe_segmento.sacado_numero_inscricao,\r\n      nome: detalhe_segmento.nome,\r\n      logradouro: detalhe_segmento.logradouro,\r\n      bairro: detalhe_segmento.bairro,\r\n      cep: detalhe_segmento.cep,\r\n      cidade: detalhe_segmento.cidade,\r\n      estado: detalhe_segmento.estado,\r\n      numero_sequencial: Number(numero_sequencial)\r\n    }\r\n\r\n    Return.push({ detalhe })\r\n  })\r\n\r\n  /**\r\n   * Trailler Arquivo\r\n   */\r\n  numero_sequencial++\r\n  const trailer_arquivo = {\r\n    valor_total: sumBy(dadosGeracao.detalhe_segmento, (Row: any) => Number(Row.valor_titulo)),\r\n    numero_sequencial: Number(numero_sequencial)\r\n  }\r\n\r\n  Return.push({ trailer_arquivo })\r\n\r\n  return Return.map((Row: any) => generateRemessaCnab(Row, 400, bankCode)).join('\\n')\r\n}\r\n"],"names":["_a","isCNPJ","isCPF","dayjs"],"mappings":"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"}