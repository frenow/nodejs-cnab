{"version":3,"file":"nodejs-cnab.umd.js","sources":["../src/const.ts","../src/utils.ts","../src/remessa.ts","../src/retorno.ts","../src/helperGenerateRemessaCNAB240.ts","../src/helperGenerateRemessaCNAB400.ts"],"sourcesContent":["export const CNAB_YAML_DIR = './node_modules/@banco-br/cnab_yaml'\r\nexport const BANK = {\r\n  bb: {\r\n    code: '001',\r\n    remessa: {\r\n      400: ['header_arquivo', 'detalhe']\r\n    },\r\n    retorno: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\r\n    }\r\n  },\r\n  santander: {\r\n    code: '033',\r\n    remessa: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo'],\r\n      240: [\r\n        'header_arquivo',\r\n        'header_lote',\r\n        'detalhe_segmento_p',\r\n        'detalhe_segmento_q',\r\n        'detalhe_segmento_r',\r\n        'trailer_lote',\r\n        'trailer_arquivo'\r\n      ]\r\n    },\r\n    retorno: {\r\n      400: ['header_arquivo', 'detalhe'],\r\n      240: ['header_arquivo', 'detalhe_segmento_t', 'detalhe_segmento_u']\r\n    }\r\n  },\r\n  banrisul: {\r\n    code: '041',\r\n    retorno: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\r\n    }\r\n  },\r\n  caixa: {\r\n    code: '104',\r\n    remessa: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\r\n    },\r\n    retorno: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\r\n    }\r\n  },\r\n  bradesco: {\r\n    code: '237',\r\n    remessa: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\r\n    },\r\n    retorno: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\r\n    }\r\n  },\r\n  itau: {\r\n    code: '341',\r\n    retorno: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\r\n    }\r\n  },\r\n  bancoob: {\r\n    code: '756',\r\n    remessa: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\r\n    },\r\n    retorno: {\r\n      400: ['header_arquivo', 'detalhe', 'trailer_arquivo']\r\n    }\r\n  }\r\n}\r\n","const pad = require('pad')\r\nconst fs = require('fs')\r\nconst yaml = require('js-yaml')\r\n\r\nexport function makeLine(layout: any, data: any) {\r\n  const object: any = {}\r\n  if (layout) {\r\n    let index = 0\r\n    Object.keys(layout).forEach(key => {\r\n      const item = layout[key]\r\n      if (item.pos) {\r\n        const start = item.pos[0] - 1 // yml começa no 1 e array em 0\r\n        const length = item.pos[1] - item.pos[0] + 1\r\n        if (data) {\r\n          object[key] = data.substr(start, length) || item.default\r\n        }\r\n      } else {\r\n        console.warn('Nao tem posicao pra key', key)\r\n      }\r\n    })\r\n  }\r\n  return object\r\n}\r\n\r\nexport function readLine(layout: any, data: any) {\r\n  let line = ''\r\n  const object: any = {}\r\n  if (layout) {\r\n    Object.keys(layout).forEach(key => {\r\n      const item = layout[key]\r\n      let value\r\n      if (key in data && data[key]) {\r\n        value = data[key]\r\n      } else {\r\n        value = item.default\r\n      }\r\n      const baseValue = value ? value + '' : ''\r\n      const pictures = usePicture(item, baseValue)\r\n      object[key] = pictures\r\n      line += pictures\r\n    })\r\n  }\r\n  return { line, object }\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nconst usePicture = function(item: any, value = '') {\r\n  const { picture } = item\r\n  if (picture.indexOf('V9') > 0) {\r\n    const out = regexPicture(/9\\((\\w+?)\\)/g, picture)\r\n    return formatCurrency(Number(value), Number(out[0]), Number(out[1]))\r\n  } else if (picture.startsWith('9')) {\r\n    const out = regexPicture(/9\\((\\w+?)\\)/g, picture)\r\n    if (item.date_format) {\r\n      return formatDate(value, out[0], item.date_format) // , item.date_format\r\n    } else {\r\n      return formatNumber(value, out[0])\r\n    }\r\n  } else if (picture.startsWith('X')) {\r\n    const out = regexPicture(/X\\((\\w+?)\\)/g, picture)\r\n    return formatText(value, out[0])\r\n  } else {\r\n    throw new Error(`Cant recognize picture for ${picture}`)\r\n  }\r\n}\r\nconst regexPicture = (exp: any, picture: any) => {\r\n  let regex = new RegExp(exp)\r\n  let text = picture // \"9(10)V9(10)\",\r\n  let result\r\n  let out = []\r\n\r\n  // tslint:disable-next-line:no-conditional-assignment\r\n  while ((result = regex.exec(text))) {\r\n    out.push(result[1])\r\n  }\r\n\r\n  return out\r\n}\r\n\r\n/*\r\n * Alfanumérico (picture X): alinhados à esquerda com brancos à direita. Preferencialmente,\r\n * todos os caracteres devem ser maiúsculos. Aconselhase a não utilização de\r\n * caracteres especiais (ex.: “Ç”, “?”,, etc) e\r\n * acentuação gráfica (ex.: “Á”, “É”, “Ê”, etc) e os campos não utiliza dos deverão ser preenchidos com brancos.\r\n * */\r\nconst formatText = function(value: any, size: any) {\r\n  return pad(value.slice(0, size), size, ' ')\r\n}\r\n\r\n/*  Numérico (picture 9): alinhado à direita com zeros à esquerda e os campos não utilizados deverão ser preenchidos\r\n * com zeros. - Vírgula assumida (picture V): indica a posição da vírgula dentro de um campo numérico.\r\n * Exemplo: num campo com picture “9(5)V9(2)”, o número “876,54” será representado por “0087654”\r\n * @param {*} picture\r\n * @param {*} value\r\n */\r\nconst formatNumber = function(value: any, size: any) {\r\n  while (value.length < size) {\r\n    value = '0' + value\r\n  }\r\n  return value\r\n}\r\n\r\nconst formatDate = function(value: any, size: any, dateFormat: any) {\r\n  switch (dateFormat) {\r\n    case '%d%m%Y':\r\n      value = value.slice(0, 8)\r\n      break\r\n    case '%d%m%y':\r\n      value = value.slice(0, 4) + value.slice(6, 8)\r\n      break\r\n\r\n    case '%H%M%S':\r\n      value = value.slice(0, 8)\r\n      break\r\n\r\n    default:\r\n      throw new Error('dateFormat inválido: ' + dateFormat)\r\n  }\r\n\r\n  while (value.length < size) {\r\n    value = '0' + value\r\n  }\r\n\r\n  return value\r\n}\r\n\r\nexport function formatCurrency(value: number = 0, integer: number = 0, decimal: number = 0) {\r\n  value = Number(value)\r\n  if (typeof value !== 'number') {\r\n    throw new Error('formatCurrency: ' + value + integer + decimal)\r\n  }\r\n\r\n  //  Efetua o arredondamento\r\n  const vals = value.toFixed(decimal).split('.')\r\n  vals[1] = vals[1] || ''\r\n\r\n  //  Limita os caracteres\r\n  vals[0] = pad(Number(integer), vals[0].toString().slice(0, integer), '0')\r\n  vals[1] = pad(vals[1].toString().slice(0, decimal), Number(decimal), '0')\r\n\r\n  return vals.join('')\r\n}\r\n\r\nexport function readYaml(filename: string) {\r\n  return yaml.safeLoad(fs.readFileSync(filename, 'utf8'))\r\n}\r\n\r\nexport function getDetailsMessage(detailsCodes: string, eventCodes: any) {\r\n  /*\r\n    função que retorna as mensagens de rejeição/informação/alerta, referentes a uma cobrança\r\n  */\r\n\r\n  let start = 0\r\n  let messages: any[] = []\r\n  let singleDetailCode,\r\n    detailMessage = ''\r\n\r\n  if (detailsCodes && Number(detailsCodes) !== 0) {\r\n    do {\r\n      singleDetailCode = detailsCodes.substring(start, 2)\r\n      detailMessage = eventCodes[singleDetailCode]\r\n\r\n      // casos em que não existem dados\r\n      if (singleDetailCode === '00' || !detailMessage) continue\r\n\r\n      messages.push(detailMessage)\r\n      start += 2\r\n    } while (singleDetailCode === '')\r\n  }\r\n\r\n  return messages\r\n}\r\n","import { readYaml, readLine } from './utils'\r\nimport { CNAB_YAML_DIR } from './const'\r\n\r\n/**\r\n * ARQUIVO REMESSA\r\n * @param {*} files\r\n * @param {*} cnabtype\r\n * @param {*} bankcode\r\n */\r\nexport const generateRemessaCnab = (files: any, cnabtype = 400, bankcode = '237') => {\r\n  try {\r\n    const yamls: any = []\r\n    for (const key in files) {\r\n      const value = files[key]\r\n      if (value.forEach) {\r\n        value.forEach((v: any) => {\r\n          const layout = readYaml(CNAB_YAML_DIR + `/cnab${cnabtype}/${bankcode}/remessa/${key}.yml`)\r\n          yamls.push({\r\n            layout,\r\n            data: v\r\n          })\r\n        })\r\n      } else {\r\n        const layout = readYaml(CNAB_YAML_DIR + `/cnab${cnabtype}/${bankcode}/remessa/${key}.yml`)\r\n        yamls.push({\r\n          layout,\r\n          data: value\r\n        })\r\n      }\r\n    }\r\n\r\n    const infos = yamls.map((i: any, index: any) => {\r\n      return readLine(i.layout, i.data)\r\n    })\r\n\r\n    const infosLine = infos.map((i: any) => {\r\n      return i.line\r\n    })\r\n\r\n    const CNAB_EOL = '\\r\\n'\r\n    const data = infosLine.join(CNAB_EOL)\r\n    return data\r\n  } catch (e) {\r\n    console.error(`generateRemessaCnab`, e)\r\n  }\r\n}\r\n","import { getDetailsMessage, makeLine, readYaml } from './utils'\r\nimport { CNAB_YAML_DIR } from './const'\r\n\r\n/**\r\n * ARQUIVO RETORNO\r\n * @param {*} files\r\n * @param {*} cnabtype\r\n * @param {*} bankcode\r\n */\r\nexport const parseRemessaCnab = (\r\n  files: any,\r\n  cnabtype = 400,\r\n  bankcode = '237',\r\n  retorno: { split: (arg0: string) => void }\r\n) => {\r\n  try {\r\n    const yamls: any = []\r\n    const retornoLines: any = retorno.split('\\n')\r\n    for (var index = 0; index <= retornoLines.length; index++) {\r\n      //let index = 0\r\n      for (const key in files) {\r\n        const value = files[key]\r\n        if (value.indexOf('codigo') === 0) {\r\n          continue\r\n        }\r\n        if (value.forEach) {\r\n          value.forEach((v: any) => {\r\n            const layout = readYaml(\r\n              CNAB_YAML_DIR + `/cnab${cnabtype}/${bankcode}/retorno/${value}.yml`\r\n            )\r\n            yamls.push({\r\n              layout,\r\n              data: retornoLines[index]\r\n            })\r\n          })\r\n        } else {\r\n          const layout = readYaml(\r\n            CNAB_YAML_DIR + `/cnab${cnabtype}/${bankcode}/retorno/${value}.yml`\r\n          )\r\n          yamls.push({\r\n            layout,\r\n            data: retornoLines[index]\r\n          })\r\n        }\r\n        //index++\r\n      }\r\n    }\r\n\r\n    const infos = yamls.map((i: any, index: any) => {\r\n      const line = makeLine(i.layout, i.data)\r\n      return line\r\n    })\r\n\r\n    return infos\r\n  } catch (e) {\r\n    console.error(`parseRemessaCnab: `, e)\r\n  }\r\n}\r\n\r\nexport const parseEventMessage = (linesData: any = [], cnabtype = 240, bankcode = '237') => {\r\n  try {\r\n    /*\r\n      40a => 03 => Entrada Rejeitada | 26 => Instrução Rejeitada | 30 => Alteração de Dados Rejeitada\r\n      40c => 06 => Liquidação        | 09 => Baixa               | 17 => Liquidação após Baixa ou Liquidação de Boleto não Registrado | \r\n             93 => Baixa Operacional | 94 => Cancelamento de Baixa Operacional\r\n    */\r\n    const type40a = ['03', '26', '30']\r\n    const type40c = ['06', '09', '17', '93', '94']\r\n\r\n    if (!linesData || linesData.length === 0) return []\r\n\r\n    const eventCodes = readYaml(\r\n      CNAB_YAML_DIR + `/cnab${cnabtype}/${bankcode}/retorno/ocorrencias.yml`\r\n    )\r\n\r\n    return linesData.map((line: any) => {\r\n      const message: any = {}\r\n      let messageDetails: any[] = []\r\n      let detailCodes,\r\n        eventCodesTable = ''\r\n\r\n      const code = line.codigo_ocorrencia\r\n      if (code) {\r\n        // define mensagem principal\r\n        message.descricao = eventCodes.movimento[code]\r\n\r\n        // códigos que descrevem melhor a ocorrência (40a e 40c - Nota 40)\r\n        detailCodes = line.identificacao_rejeicao\r\n\r\n        if (type40a.includes(code)) {\r\n          // rejeições\r\n          eventCodesTable = eventCodes.rejeicao\r\n        } else if (type40c.includes(code)) {\r\n          // liquidações/baixas\r\n          if (code === '06')\r\n            // Liquidação\r\n            eventCodesTable = eventCodes.liquidacao\r\n          else eventCodesTable = eventCodes.baixa\r\n        }\r\n\r\n        // retorna as mensagens de rejeição/informação/alerta, baseado na ocorrência\r\n        messageDetails = getDetailsMessage(detailCodes, eventCodesTable)\r\n        if (messageDetails.length > 0) {\r\n          message.details = messageDetails\r\n        }\r\n\r\n        return {\r\n          ...line,\r\n          mensagens_ocorrencia: { ...message }\r\n        }\r\n      }\r\n    })\r\n  } catch (e) {\r\n    console.error(`parseEventMessage: `, e)\r\n  }\r\n}\r\n","// tslint:disable:variable-name\r\n\r\nimport { generateRemessaCnab } from './remessa'\r\nconst { isCNPJ, isCPF } = require('brazilian-values')\r\nconst dayjs = require('dayjs')\r\n\r\nexport function helperGenerateRemessaCNAB240(dadosGeracao: any, bankCode: any) {\r\n  const Return: any = []\r\n\r\n  /**\r\n   * Header - Arquivo\r\n   */\r\n\r\n  const header_arquivo: any = {\r\n    codigo_inscricao: dadosGeracao.codigo_inscricao,\r\n    numero_inscricao: dadosGeracao.numero_inscricao,\r\n    codigo_convenio: dadosGeracao.codigo_convenio,\r\n    agencia: dadosGeracao.agencia,\r\n    conta_corrente: dadosGeracao.conta_corrente,\r\n    conta_corrente_dv: dadosGeracao.conta_corrente_dv,\r\n    nome_empresa: dadosGeracao.nome_empresa,\r\n    data_geracao: dayjs(dadosGeracao.data_geracao).format('DDMMYYYY'),\r\n    hora_geracao: dayjs(dadosGeracao.data_geracao).format('HHmmss'),\r\n    numero_sequencial_arquivo: dadosGeracao.numero_sequencial_arquivo\r\n  }\r\n  Return.push({ header_arquivo })\r\n\r\n  /**\r\n   * Header - Lote\r\n   */\r\n  const header_lote = {\r\n    codigo_inscricao: dadosGeracao.codigo_inscricao,\r\n    numero_inscricao: dadosGeracao.numero_inscricao,\r\n    codigo_convenio: dadosGeracao.codigo_convenio,\r\n    agencia: dadosGeracao.agencia,\r\n    conta_corrente: dadosGeracao.conta_corrente,\r\n    conta_corrente_dv: dadosGeracao.conta_corrente_dv,\r\n    nome_empresa: dadosGeracao.nome_empresa,\r\n    data_geracao: header_arquivo.data_geracao,\r\n    numero_sequencial_arquivo: dadosGeracao.numero_sequencial_arquivo\r\n  }\r\n  Return.push({ header_lote })\r\n\r\n  /**\r\n   * Detalhe Segmento\r\n   */\r\n  let numero_sequencial_lote = 0\r\n  dadosGeracao.detalhe_segmento.forEach((detalhe_segmento: any) => {\r\n    /**\r\n     * Detalhe Segmento P\r\n     */\r\n    numero_sequencial_lote++\r\n    const detalhe_segmento_p = {\r\n      numero_sequencial_lote,\r\n      agencia: dadosGeracao.agencia,\r\n      conta_corrente: dadosGeracao.conta_corrente,\r\n      conta_corrente_dv: dadosGeracao.conta_corrente_dv,\r\n      nosso_numero: detalhe_segmento.nosso_numero,\r\n      numero_documento: detalhe_segmento.numero_documento,\r\n      vencimento: dayjs(detalhe_segmento.vencimento).format('DDMMYYYY'),\r\n      valor_titulo: detalhe_segmento.valor_titulo,\r\n      data_emissao: dayjs(detalhe_segmento.data_emissao).format('DDMMYYYY'),\r\n      uso_empresa: detalhe_segmento.uso_empresa\r\n    }\r\n    Return.push({ detalhe_segmento_p })\r\n\r\n    /**\r\n     * Detalhe Segmento Q\r\n     */\r\n    numero_sequencial_lote++\r\n    let sacado_codigo_inscricao = 3\r\n    if (isCPF(detalhe_segmento.sacado_numero_inscricao)) sacado_codigo_inscricao = 1\r\n    if (isCNPJ(detalhe_segmento.sacado_numero_inscricao)) sacado_codigo_inscricao = 2\r\n\r\n    const detalhe_segmento_q = {\r\n      numero_sequencial_lote,\r\n      sacado_codigo_inscricao,\r\n      sacado_numero_inscricao: detalhe_segmento.sacado_numero_inscricao,\r\n      nome: detalhe_segmento.nome,\r\n      logradouro: detalhe_segmento.logradouro,\r\n      bairro: detalhe_segmento.bairro,\r\n      cep: detalhe_segmento.cep,\r\n      cidade: detalhe_segmento.cidade,\r\n      estado: detalhe_segmento.estado\r\n    }\r\n    Return.push({ detalhe_segmento_q })\r\n  })\r\n\r\n  /**\r\n   * Trailler - Lote\r\n   */\r\n  const valor_total_titulo_simples = dadosGeracao.detalhe_segmento\r\n    .map((El: any) => El.valor_titulo)\r\n    .reduce((curr: number, total: number) => total + curr, 0)\r\n\r\n  const trailer_lote = {\r\n    qtde_registro_lote: dadosGeracao.detalhe_segmento.length * 2 + 2, // Soma todas as linhas Detalhe P/Q, Header Lote e Header Trailler\r\n    qtde_titulo_cobranca_simples: dadosGeracao.detalhe_segmento.length, //  Soma todos os P\r\n    valor_total_titulo_simples\r\n  }\r\n  Return.push({ trailer_lote })\r\n\r\n  /**\r\n   * Trailler Arquivo\r\n   */\r\n  const trailer_arquivo = {\r\n    qtde_lotes: 1,\r\n    qtde_registros: Return.length + 1\r\n  }\r\n\r\n  Return.push({ trailer_arquivo })\r\n\r\n  return Return.map((Row: any) => generateRemessaCnab(Row, 240, bankCode)).join('\\n')\r\n}\r\n","// tslint:disable:variable-name\r\n\r\nimport { generateRemessaCnab } from './remessa'\r\nconst { isCNPJ, isCPF } = require('brazilian-values')\r\nconst dayjs = require('dayjs')\r\nconst { sumBy } = require('lodash')\r\n\r\nexport function helperGenerateRemessaCNAB400(dadosGeracao: any, bankCode: any) {\r\n  const Return: any = []\r\n  let numero_sequencial = 0\r\n\r\n  /**\r\n   * Header - Arquivo\r\n   */\r\n  numero_sequencial++\r\n  const header_arquivo: any = {\r\n    codigo_convenio: dadosGeracao.codigo_convenio,\r\n    nome_empresa: dadosGeracao.nome_empresa,\r\n    data_geracao: dayjs(dadosGeracao.data_geracao).format('DDMMYYYY'),\r\n    numero_sequencial: Number(numero_sequencial)\r\n  }\r\n\r\n  Return.push({ header_arquivo })\r\n\r\n  /**\r\n   * Detalhe Segmento\r\n   */\r\n  dadosGeracao.detalhe_segmento.forEach((detalhe_segmento: any) => {\r\n    numero_sequencial++\r\n    let sacado_codigo_inscricao = 99\r\n\r\n    if (isCPF(detalhe_segmento.sacado_numero_inscricao)) sacado_codigo_inscricao = 1\r\n    if (isCNPJ(detalhe_segmento.sacado_numero_inscricao)) sacado_codigo_inscricao = 2\r\n\r\n    const detalhe = {\r\n      codigo_inscricao: isCNPJ(dadosGeracao.numero_inscricao) ? 2 : 1,\r\n      numero_inscricao: dadosGeracao.numero_inscricao,\r\n      codigo_convenio: dadosGeracao.codigo_convenio,\r\n      uso_empresa: detalhe_segmento.uso_empresa,\r\n      mensagem: detalhe_segmento.mensagem,\r\n      numero_documento: detalhe_segmento.numero_documento,\r\n      vencimento: dayjs(detalhe_segmento.vencimento).format('DDMMYYYY'),\r\n      valor_titulo: detalhe_segmento.valor_titulo,\r\n      data_emissao: dayjs(detalhe_segmento.data_emissao).format('DDMMYYYY'),\r\n      sacado_codigo_inscricao,\r\n      sacado_numero_inscricao: detalhe_segmento.sacado_numero_inscricao,\r\n      nome: detalhe_segmento.nome,\r\n      logradouro: detalhe_segmento.logradouro,\r\n      bairro: detalhe_segmento.bairro,\r\n      cep: detalhe_segmento.cep,\r\n      cidade: detalhe_segmento.cidade,\r\n      estado: detalhe_segmento.estado,\r\n      numero_sequencial: Number(numero_sequencial)\r\n    }\r\n\r\n    Return.push({ detalhe })\r\n  })\r\n\r\n  /**\r\n   * Trailler Arquivo\r\n   */\r\n  numero_sequencial++\r\n  const trailer_arquivo = {\r\n    valor_total: sumBy(dadosGeracao.detalhe_segmento, (Row: any) => Number(Row.valor_titulo)),\r\n    numero_sequencial: Number(numero_sequencial)\r\n  }\r\n\r\n  Return.push({ trailer_arquivo })\r\n\r\n  return Return.map((Row: any) => generateRemessaCnab(Row, 400, bankCode)).join('\\n')\r\n}\r\n"],"names":["_a","isCNPJ","isCPF","dayjs"],"mappings":"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"}